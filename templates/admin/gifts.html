{% extends "base.html" %}

{% block title %}Manage Gifts for {{ child.name }}{% endblock %}

{% block content %}
<div class="page-header">
    <a href="{{ url_for('admin') }}" class="back-link">‚Üê Back to Admin Dashboard</a>
    <h1 class="page-title">Manage Gifts for {{ child.name }}</h1>
    <a href="{{ url_for('admin_add_gift', child_id=child.id) }}" class="btn btn-primary">+ Add Gift</a>
</div>

{% if child.gifts %}
    <div class="admin-table">
        <table class="table">
            <thead>
                <tr>
                    <th>Gift Name</th>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Purchased By</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for gift in child.gifts %}
                <tr class="{% if gift.is_purchased %}row-purchased{% endif %}">
                    <td class="gift-name-cell">{{ gift.name }}</td>
                    <td class="description-cell">
                        {% if gift.description %}
                            {{ gift.description[:50] }}{% if gift.description|length > 50 %}...{% endif %}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>
                        {% if gift.is_purchased %}
                            <span class="status-badge status-purchased">Purchased</span>
                        {% else %}
                            <span class="status-badge status-available">Available</span>
                        {% endif %}
                    </td>
                    <td>{{ gift.purchased_by if gift.purchased_by else '-' }}</td>
                    <td class="actions-cell">
                        <a href="{{ url_for('admin_edit_gift', gift_id=gift.id) }}" class="btn btn-small btn-secondary">Edit</a>
                        <form method="POST" action="{{ url_for('admin_delete_gift', gift_id=gift.id) }}" style="display: inline;" onsubmit="return confirm('Delete this gift?');">
                            <button type="submit" class="btn btn-small btn-danger">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="empty-state">
        <div class="empty-icon">üéÅ</div>
        <h2>No Gifts Yet</h2>
        <p>Add the first gift to {{ child.name }}'s list</p>
        <a href="{{ url_for('admin_add_gift', child_id=child.id) }}" class="btn btn-primary">+ Add Gift</a>
    </div>
{% endif %}
{% endblock %}
